Testcase                                                                                      Result
--------                                                                                      ------
[16] test_libvirt_access.bash                                                                  PASS 
--- begin output -----------------------------------------------------------
Domain KVM-Guest-1 destroyed

Domain KVM-Guest-2 destroyed

Domain KVM-Guest-1 started

Domain KVM-Guest-2 started

+ append_cleanup 'killall -9 -u testuser1; userdel -fr -Z testuser1'
++ type test_cleanup
++ sed '1,3d;$d'
+ eval 'function test_cleanup {
	    rm -f "$tmp1" "$tmp2" "$localtmp"
	killall -9 -u testuser1; userdel -fr -Z testuser1
    }'
+ append_cleanup 'groupdel testuser1'
++ type test_cleanup
++ sed '1,3d;$d'
+ eval 'function test_cleanup {
	    rm -f "$tmp1" "$tmp2" "$localtmp";
    killall -9 -u testuser1;
    userdel -fr -Z testuser1
	groupdel testuser1
    }'
+ userdel -fr -Z testuser1
userdel: user 'testuser1' does not exist
+ groupdel testuser1
groupdel: group 'testuser1' does not exist
+ useradd -Z staff_u testuser1 -G libvirt
+ [[ 0 -ne 0 ]]
+ append_cleanup 'killall -9 -u testuser2; userdel -fr -Z testuser2'
++ type test_cleanup
++ sed '1,3d;$d'
+ eval 'function test_cleanup {
	    rm -f "$tmp1" "$tmp2" "$localtmp";
    killall -9 -u testuser1;
    userdel -fr -Z testuser1;
    groupdel testuser1
	killall -9 -u testuser2; userdel -fr -Z testuser2
    }'
+ append_cleanup 'groupdel testuser2'
++ type test_cleanup
++ sed '1,3d;$d'
+ eval 'function test_cleanup {
	    rm -f "$tmp1" "$tmp2" "$localtmp";
    killall -9 -u testuser1;
    userdel -fr -Z testuser1;
    groupdel testuser1;
    killall -9 -u testuser2;
    userdel -fr -Z testuser2
	groupdel testuser2
    }'
+ userdel -fr -Z testuser2
userdel: user 'testuser2' does not exist
+ groupdel testuser2
groupdel: group 'testuser2' does not exist
+ useradd -Z staff_u testuser2
+ [[ 0 -ne 0 ]]
+ virsh connect qemu+tls://rhv.atsec.com/system

+ [[ 0 -ne 0 ]]
+ /bin/su - testuser1 -c 'virsh connect qemu+tls://rhv.atsec.com/system'

+ [[ 0 -ne 0 ]]
+ /bin/su - testuser1 -c 'virsh connect qemu+tls://rhv.atsec.com/system --readonly'

+ [[ 0 -ne 0 ]]
+ /bin/su - testuser2 -c 'virsh connect qemu+tls://rhv.atsec.com/system'

+ [[ 0 -ne 0 ]]
+ /bin/su - testuser2 -c 'virsh connect qemu+tls://rhv.atsec.com/system --readonly'

+ [[ 0 -ne 0 ]]
+ exit_pass
+ [[ -n '' ]]
+ exit 0
+ test_cleanup
+ rm -f /tmp/tmp.DE5THof22w /tmp/tmp.DMUwe3ch4Z /usr/local/eal2_testing/audit-test/tmp.NPgnP1V4se
+ killall -9 -u testuser1
+ userdel -fr -Z testuser1
+ groupdel testuser1
groupdel: group 'testuser1' does not exist
+ killall -9 -u testuser2
+ userdel -fr -Z testuser2
+ groupdel testuser2
groupdel: group 'testuser2' does not exist
+ exit
--- end output -------------------------------------------------------------

